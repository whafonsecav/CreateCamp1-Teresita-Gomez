/* --- Configuración Global --- */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Se elimina la fuente base del HTML para usar 'vmin' en su lugar.
  Esto previene conflictos de escalado.
*/
body {
    height: 100vh;
    width: 100vw;
    background-color: #000; /* Fondo negro de la página */
    color: #f5f5f5;
    font-family: 'Montserrat', sans-serif;
    display: flex;
    overflow: hidden; /* Evita cualquier scroll */
}

/* --- Wrapper de Presentación --- */
.presentation-wrapper {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
    /* Unidades 'vmin' para que todo escale junto */
    padding: 2vmin; /* Margen negro escalable */
    gap: 1.5vmin; /* Espacio escalable */
}

/* --- Contenedor de Tarjeta 16:9 --- */
.presentation-container {
    width: 100%;
    flex: 1 1 0;
    aspect-ratio: 1920 / 1080;
    max-width: 100%;
    max-height: 100%;

    position: relative;
    overflow: hidden;
    background-color: #111;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
}

.slide-deck {
    width: 100%;
    height: 100%;
    position: relative;
}

/* --- Estilo de Diapositivas --- */
.slide {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.5s ease-in-out;
    
    background-image: url('imagenes/fondo.png');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    background-color: #111; 

    display: flex;
}

.slide.active {
    opacity: 1;
    visibility: visible;
    z-index: 10;
}

/* Portada */
#slide-1 {
    background-image: none;
    background-color: #111;
}
#slide-1 img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

/* --- Estilo para la lámina de cierre --- */
.slide-full-image {
    background-image: none; /* Quita el fondo de plantilla */
    background-color: #111; /* Fondo sólido */
    display: flex;
    justify-content: center;
    align-items: center;
}
.slide-full-image img {
    width: 100%;
    height: 100%;
    object-fit: contain; /* Ajusta la imagen al contenedor 16:9 */
}


/* --- Layout de Contenido (37% Izq - 43% Der) --- */
.left-spacer {
    /* --- Este es el layout 37% --- */
    flex-basis: 37%;
    flex-shrink: 0;
}

/* Unidades 'vmin' para todo el padding */
.content-area {
    /* --- Este es el layout 43% --- */
    flex-basis: 43%;
    flex-shrink: 0;
    height: 100%;
    
    padding: 3.5vmin 4.5vmin; /* Padding escalable */
    
    display: flex;
    flex-direction: column;
    justify-content: center; /* Centra verticalmente */
    overflow-y: auto; /* Permite scroll en diapositivas largas */
    
    /* Esta regla es VITAL para que el texto no se desborde */
    min-width: 0;
    
    scrollbar-width: none;
}
.content-area::-webkit-scrollbar { 
    display: none;
}


/* --- Diseño de Texto Moderno --- */

/* Esta regla fuerza al texto a respetar el contenedor padre */
.content-area h2,
.content-area h3,
.content-area p {
    overflow-wrap: break-word;
    word-wrap: break-word;
    max-width: 100%;
}

.content-area h2 {
    font-size: 3.8vmin; /* Fuente grande escalable */
    font-weight: 900;
    color: #FFFFFF;
    text-transform: uppercase;
    margin-bottom: 2.5vmin; 
    line-height: 1.2;
}

.red-num {
    color: #a82f12; 
    display: block;
    font-size: 2.8vmin; /* Fuente grande escalable */
    margin-bottom: 0.5vmin;
}

.sub-section {
    margin-bottom: 2vmin; 
    border-left: 0.4vmin solid #a82f12; /* Borde escalable */
    padding-left: 1.5vmin;
    
    /* Esta regla es VITAL para que el texto no se desborde */
    max-width: 100%;
}

.sub-heading {
    font-size: 2.2vmin; /* Fuente grande escalable */
    font-weight: 700;
    color: #FFFFFF;
    margin-bottom: 1vmin;
    
    display: flex;
    align-items: center;
    gap: 1vmin;
}

.sub-heading i {
    color: #a82f12;
    font-size: 2vmin; /* Fuente grande escalable */
    width: 2.2vmin;
    text-align: center;
}

.content-area p {
    font-size: 1.9vmin; /* Fuente grande escalable */
    font-weight: 400;
    line-height: 1.6;
    color: #cccccc;
}

/* --- Diapositivas de Bibliografía (NUEVO ESTILO) --- */

/* 1. Fondo sólido en las láminas de bibliografía */
/* --- Selectores de Bibliografía actualizados --- */
#slide-16,
#slide-17 {
    background-image: none;
    background-color: #111; /* Fondo sólido */
}

/* 2. El contenedor de bibliografía ahora ocupa todo y centra */
.content-area.bibliography {
    flex-basis: 100%; /* Ocupa todo el ancho */
    min-width: initial; /* Resetea el min-width */
    max-width: 100vw; /* Asegura que ocupe todo */
    
    /* Centrado vertical */
    justify-content: center; 
    /* Centrado horizontal del bloque de contenido */
    align-items: center; 
    
    padding: 4vmin 8vmin; /* Padding generoso */
    
    /* Habilita scroll si el contenido es muy largo */
    overflow-y: auto; 
}

/* 3. Estilos de texto */
.bibliography h2 {
    font-size: 2.8vmin; 
    margin-bottom: 3vmin;
    text-align: center; /* Centra el título */
    /* El .red-num está vacío, así que el título será blanco */
}

.bibliography ul {
    list-style: none;
    padding: 0;
    text-align: left; /* El texto de la lista alineado a la izquierda */
    
    /* --- Layout 10%-90% --- */
    width: 80%; /* 80% de ancho, centrado por el padre, da 10% a c/lado */
}

.bibliography li {
    font-size: 1.4vmin; 
    line-height: 1.7; /* Más legible */
    color: #ccc;
    margin-bottom: 1.5vmin; /* Más espaciado */
    word-break: break-all; /* Sigue siendo necesario */
}
.bibliography li a {
    /* --- Color de URL --- */
    color: #a82f12; /* Mismo color que los numerales */
    text-decoration: none;
}
.bibliography li a:hover { 
    text-decoration: underline; 
}


/* --- Navegación más sutil --- */
.presentation-nav {
    width: 100%;
    flex: 0 0 auto;
    
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.5vmin 0;
    background-color: transparent;
    user-select: none;
    
    gap: 1.5vmin;
}

.nav-button {
    font-family: 'Montserrat', sans-serif;
    font-size: 2vmin;
    width: 4.5vmin; /* Más sutil */
    height: 4.5vmin; /* Más sutil */
    background-color: #222;
    color: #f5f5f5;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: grid;
    place-items: center;
    transition: all 0.3s ease;
}

.nav-button:hover:not(:disabled) {
    background-color: #a82f12;
    color: #FFFFFF;
    transform: scale(1.1);
}

.nav-button:disabled {
    background-color: #111;
    color: #444;
    cursor: not-allowed;
    transform: none;
}

.indicator-dots-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1.2vmin;
    /* margin: 0 1.5vmin; */
}

.dot {
    width: 1.2vmin; /* Más sutil */
    height: 1.2vmin; /* Más sutil */
    background-color: #333;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s ease;
}

.dot:hover {
    background-color: #777;
}

.dot.active {
    background-color: #a82f12;
    transform: scale(1.3);
}


/* --- Estilo del Título de la Canción (MODIFICADO) --- */
.song-title-text {
    font-size: 1.8vmin; 
    color: #cccccc; 
    font-weight: 400;
    user-select: none; 
    white-space: nowrap; /* Evita que el texto se rompa */
    
    /* --- ESTADO OCULTO --- */
    opacity: 0;
    max-width: 0;         /* <-- CAMBIO CLAVE: Colapsa el elemento */
    overflow: hidden;   /* <-- CAMBIO CLAVE: Oculta el texto mientras colapsa */
    
    /* Transición suave. Notar que max-width se anima */
    transition: opacity 0.3s ease-out, max-width 0.5s ease-in-out;
}

/* Estado visible que se activará con JS */
.song-title-text.visible {
    opacity: 1;
    max-width: 50vmin; /* <-- CAMBIO CLAVE: Dale un ancho máximo para expandirse */
    user-select: auto;
}


/* --- Estilos del Juego Interactivo --- */

.game-area {
    /* Reseteamos el padding para tener control total */
    padding: 0;
    /* Centramos el contenido del juego */
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden; /* Para las transiciones */
}

/* Estilo de las vistas del juego (Ruleta vs Pregunta) */
.game-view {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2vmin;
    padding: 3.5vmin 4.5vmin;
    transition: all 0.5s ease;
}
.game-instructions {
    font-size: 2vmin;
    color: #ccc;
}
/* Ocultar la vista de pregunta por defecto */
.game-area .game-view[id*="-view-question"] {
    display: none;
}
/* Cuando el juego avanza, ocultamos la ruleta y mostramos la pregunta */
.game-area.game-state-question .game-view[id*="-view-wheel"] {
    display: none;
}
.game-area.game-state-question .game-view[id*="-view-question"] {
    display: flex;
}

/* Estilos de la Ruleta */
.wheel-container {
    position: relative;
    width: 25vmin;
    height: 25vmin;
    display: grid;
    place-items: center;
    margin-top: 2vmin;
}
.wheel-pointer {
    width: 0; 
    height: 0; 
    border-left: 2vmin solid transparent;
    border-right: 2vmin solid transparent;
    border-top: 4vmin solid #FFFFFF; /* Flecha blanca */
    position: absolute;
    top: -1.5vmin;
    z-index: 20;
    transform: translateY(0);
}
.wheel {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 0.5vmin solid #fff;
    background-color: #ccc; /* Fallback */
    /* Los 3 colores */
    background-image: conic-gradient(
        #a82f12 0deg 120deg,  /* Pregunta 0 */
        #f5f5f5 120deg 240deg, /* Pregunta 1 */
        #333 240deg 360deg    /* Pregunta 2 */
    );
    overflow: hidden;
    position: relative;
    z-index: 10;
    /* La animación se aplicará con JS */
    transition: transform 5s cubic-bezier(0.23, 1, 0.32, 1);
}

/* Botón de Juego */
.game-button {
    font-family: 'Montserrat', sans-serif;
    font-size: 2vmin;
    font-weight: 700;
    text-transform: uppercase;
    color: #111;
    background-color: #f5f5f5;
    border: none;
    padding: 1.5vmin 3vmin;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
}
.game-button:hover {
    background-color: #a82f12;
    color: #f5f5ff;
}
.game-button:disabled {
    background-color: #777;
    cursor: not-allowed;
}

/* Estilos de la Tarjeta (Flip) */
.card-container {
    perspective: 1000px;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.6s;
    transform-style: preserve-3d;
}
/* Estado volteado (se añade con JS) */
.card-inner.is-flipped {
    transform: rotateY(180deg);
}
.card-front, .card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    border-radius: 8px;
    
    /* Centrar contenido de la tarjeta */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2vmin;
}
.card-front {
    background-color: #333;
    /* Puedes poner algo aquí, como un signo '?' */
}
.card-back {
    background-color: #f5f5f5;
    color: #111;
    transform: rotateY(180deg);
    padding: 2vmin;
}
.question-title {
    font-size: 2.2vmin;
    font-weight: 900;
    color: #a82f12;
    text-transform: uppercase;
}
/* Texto de pregunta ahora negro y más específico */
.card-back p.game-question-text {
    font-size: 2vmin;
    font-weight: 400;
    text-align: center;
    line-height: 1.6;
    color: #111; /* <-- CORRECCIÓN DE COLOR */
}

/* Estilos del Modal (Pop-up) */
.modal {
    display: none; /* Oculto por defecto */
    position: fixed; /* Quedarse fijo en la pantalla */
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.6); /* Fondo negro translúcido */
    /* Animación de entrada */
    animation: fadeIn 0.3s ease;
}
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}
.modal-content {
    font-family: 'Montserrat', sans-serif;
    background-color: #1a1a1a;
    color: #f5f5f5;
    margin: 15% auto;
    padding: 3vmin 4vmin;
    border: 1px solid #888;
    width: 50%;
    max-width: 600px;
    border-radius: 8px;
    position: relative;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    /* Animación de zoom */
    animation: zoomIn 0.3s ease;
}
@keyframes zoomIn {
    from { transform: scale(0.5); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}
.close-modal-btn {
    color: #aaa;
    position: absolute;
    top: 1.5vmin;
    right: 2.5vmin;
    font-size: 3vmin;
    font-weight: bold;
}
.close-modal-btn:hover,
.close-modal-btn:focus {
    color: #f5f5f5;
    text-decoration: none;
    cursor: pointer;
}
.answer-title {
    font-size: 2.2vmin;
    font-weight: 900;
    color: #a82f12;
    text-transform: uppercase;
    margin-bottom: 1.5vmin;
}
#game-answer-text {
    font-size: 2vmin;
    line-height: 1.6;
    margin-bottom: 2.5vmin;
}
/* --- REGLA VACÍA ELIMINADA --- */